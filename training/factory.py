def get_db_session():
    """–§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é"""
    print("–°–æ–∑–¥–∞—é —Å–µ—Å—Å–∏—é...")
    return "üîµ –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è –ë–î"


# –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é —Å—Ä–∞–∑—É –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
class BadUOW:
    def __init__(self):
        self._session = get_db_session()  # ‚ùå –°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–ª–∞—Å—å –°–†–ê–ó–£!
        # –î–∞–∂–µ –µ—Å–ª–∏ –º—ã –Ω–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UOW!


# –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–†–ê–í–ò–õ–¨–ù–û - –ø–µ—Ä–µ–¥–∞–µ–º —Ñ–∞–±—Ä–∏–∫—É
class GoodUOW:
    def __init__(self, session_factory):
        self._session_factory = session_factory  # ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –†–ï–¶–ï–ü–¢
        self._session = None  # –°–µ—Å—Å–∏–∏ –µ—â–µ –Ω–µ—Ç!

    def __enter__(self):
        self._session = self._session_factory()  # ‚úÖ –°–æ–∑–¥–∞–µ–º –∫–æ–≥–¥–∞ –ù–£–ñ–ù–û!
        return self